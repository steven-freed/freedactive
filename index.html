<!DOCTYPE html>
<head>
    <script id="app" type="text/javascript">
        setTimeout(function() {
            var SWITCH_CONTAINER = 'switch';
        var APP_METHODS_CONTAINER = 'methods';

        var methodsStr = 'function heyyo()\n{\n\treturn "yas";\n}';
        var js = document.createElement('script');
        js.id = APP_METHODS_CONTAINER;
        js.type = 'text/javascript';
        if (document.getElementById(APP_METHODS_CONTAINER)) {
            js = document.getElementById(APP_METHODS_CONTAINER);
            js.innerText = '';
            js.appendChild(document.createTextNode(methodsStr));
        } else {
            js.appendChild(document.createTextNode(methodsStr));
            document.getElementById(SWITCH_CONTAINER).appendChild(js);
        }
        console.log(document.getElementById('methods'));
        }, 100);
    </script>
</head>
<body>
    <div id="switch">
        <script id="methods">
            function doit(a,b) {
                return a + b;
            }
        </script>
    </div>
</body>
</html>